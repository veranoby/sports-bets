{
  "metadata": {
    "purpose": "Brain Index - Meta-cerebro para navegar el sistema BRAIN v2.0",
    "created": "2025-09-27",
    "version": "2.1",
    "last_updated": "2025-11-27",
    "recent_update": "Added coordination_strategy_framework_updates section documenting IMPLEMENTATION_AND_REPORTING_OPTIMIZATION_FRAMEWORK v5.4 - git-based evidence mandatory for all work reports"
  },

  "file_purposes": {
    "brain_index.json": {
      "purpose": "Meta-cerebro y mapa de navegación del sistema BRAIN v2.0.",
      "use_case": "Consultar para entender la estructura del sistema, el propósito de cada archivo y cómo interactúan.",
      "update_frequency": "Baja. Solo se actualiza si cambia la arquitectura del sistema BRAIN."
    },
    "priorities_memory_index.json": {
      "purpose": "Jerarquía estratégica y asignación de recursos.",
      "use_case": "Definir y consultar las prioridades de desarrollo (P0-P3) y el roadmap de implementación.",
      "update_frequency": "Media. Se actualiza al inicio de cada sprint o cuando cambian las prioridades de negocio."
    },
    "backlog.json": {
      "purpose": "Gestión táctica de desarrollo y reportes de trabajo de IA.",
      "use_case": "Consultar para ver el estado granular de las tareas y los reportes de sesiones de IA.",
      "update_frequency": "Alta. Se actualiza después de cada sesión de trabajo de una IA."
    },
    "monthly_report.json": {
      "purpose": "Métricas de progreso y reporting financiero.",
      "use_case": "Generar y consultar reportes mensuales sobre KPIs, progreso de hitos y presupuesto.",
      "update_frequency": "Mensual."
    },
    "objectives_memory_index.json": {
      "purpose": "Objetivos estratégicos y métricas de éxito.",
      "use_case": "Definir los OKRs del trimestre y las métricas clave para medir el éxito del proyecto.",
      "update_frequency": "Baja. Se actualiza trimestralmente o anualmente."
    },
    "prd_system.json": {
      "purpose": "Requisitos del producto y contexto de negocio.",
      "use_case": "Entender el 'qué' y el 'porqué' del producto, incluyendo stakeholders, problemas a resolver y lógica de negocio.",
      "update_frequency": "Media. Se actualiza cuando se definen nuevas funcionalidades o cambia la estrategia de producto."
    },
    "sdd_system.json": {
      "purpose": "Diseño del sistema y arquitectura técnica.",
      "use_case": "Entender el 'cómo' técnico del producto, incluyendo arquitectura, decisiones de diseño y flujos de automatización.",
      "update_frequency": "Media. Se actualiza cuando se toman decisiones de arquitectura importantes."
    },
    "UI_UX.json": {
      "purpose": "Decisiones de diseño y filosofía de experiencia de usuario.",
      "use_case": "Definir los principios de diseño, las interfaces basadas en roles y los flujos de usuario.",
      "update_frequency": "Media. Se actualiza durante las fases de diseño de nuevas funcionalidades."
    },
    "guide_for_using_the_system.json": {
      "purpose": "Manual operativo del sistema BRAIN.",
      "use_case": "Aprender a consultar, actualizar y mantener el sistema BRAIN de forma efectiva.",
      "update_frequency": "Baja. Se actualiza cuando se mejoran los procedimientos del sistema."
    },
    "ui_ux_blueprint.json": {
      "purpose": "Blueprint técnico-visual de diseño.",
      "use_case": "Consultar las especificaciones detalladas de la librería de componentes, flujos y roadmap de UI/UX.",
      "update_frequency": "Alta. Se actualiza a medida que el sistema de diseño evoluciona."
    },
    "multi_ai_coordination_strategy.json": {
      "purpose": "La 'Constitución' que rige la interacción de todas las IAs con el proyecto.",
      "use_case": "Lectura OBLIGATORIA para cualquier IA al inicio de una sesión para entender roles, reglas y protocolos.",
      "update_frequency": "Baja. Se actualiza solo si cambian los protocolos de gobernanza de IA."
    },
    "api_endpoints_reference.json": {
      "purpose": "Artefacto técnico. Documentación de referencia de los endpoints de la API.",
      "use_case": "Consultar para entender la firma, payload y respuesta de cada endpoint. NO se migra, solo se referencia.",
      "update_frequency": "N/A (gestionado externamente)."
    },
    "typescript_interfaces_reference.json": {
      "purpose": "Artefacto técnico. Documentación de referencia de las interfaces de TypeScript.",
      "use_case": "Consultar para entender las estructuras de datos del proyecto. NO se migra, solo se referencia.",
      "update_frequency": "N/A (gestionado externamente)."
    }
  },

  "query_patterns": {
    "decision_tecnica": "Para decisiones de arquitectura, consulta `sdd_system.json` y `prd_system.json` para alinear con los requisitos.",
    "decision_producto": "Para decisiones de producto, consulta `prd_system.json`, `UI_UX.json` y `priorities_memory_index.json`.",
    "planificacion_sprint": "Para planificar un sprint, consulta `backlog.json` para tareas existentes y `priorities_memory_index.json` para la estrategia general.",
    "onboarding_ia": "Para iniciar una sesión de IA, es OBLIGATORIO leer `multi_ai_coordination_strategy.json` primero."
  },

  "update_scenarios": {
    "nueva_funcionalidad": "Actualizar `prd_system.json`, `sdd_system.json`, `UI_UX.json` y `backlog.json`.",
    "cambio_prioridad": "Actualizar `priorities_memory_index.json` y reordenar `backlog.json`.",
    "fin_sesion_ia": "Añadir un reporte de trabajo a `backlog.json`."
  },

  "boundaries_and_cross_references": {
    "ssot_declaration": "Este archivo es la SSOT para el propósito, uso y frecuencia de actualización de cada archivo del sistema BRAIN.",
    "references": "Este archivo define metadatos sobre otros archivos y no contiene datos del proyecto en sí. Referencia los artefactos técnicos `api_endpoints_reference.json` y `typescript_interfaces_reference.json` sin contener sus datos."
  },

  "documentation_accuracy_initiative": {
    "status": "COMPLETED",
    "completion_date": "2025-11-21",
    "description": "Comprehensive initiative to ensure brain/api_endpoints_reference.json and brain/typescript_interfaces_reference.json accurately reflect the current backend implementation instead of containing outdated or inaccurate information.",
    "tasks_completed": [
      "Created automated documentation generators for API endpoints and TypeScript interfaces",
      "Validated that generated documentation matches actual backend implementation",
      "Updated brain files with accurate information",
      "Established process for maintaining documentation accuracy in the future"
    ],
    "impact": "Brain files now contain accurate, up-to-date information that matches actual implementation, eliminating discrepancies between documentation and code."
  },
  
  "recent_critical_fixes_2025_11_27": {
    "adminheader_metrics_sse_fix": {
      "status": "COMPLETE",
      "completion_date": "2025-11-27",
      "problem": "AdminHeaderMetricsBar showed 'no data' - SSE not sending metrics object",
      "solution": "Backend monitoring.ts:506-528 now includes metrics in SSE events, Frontend hook processes metrics from SSE",
      "impact": "Real-time system monitoring restored: Memory, DB connections, Intervals, Admin SSE visible",
      "commit": "e63e3812"
    },
    "admindashboard_feature_flags_fix": {
      "status": "COMPLETE",
      "completion_date": "2025-11-27",
      "problem": "AdminDashboard showed all features disabled despite database having enabled=true",
      "solution": "Fixed backend/frontend field name mismatch (betting vs betting_enabled, wallet vs wallets_enabled). Added flexible parsing for string/boolean/JSON values.",
      "impact": "Dashboard correctly shows platform status: Betting, Wallets, Streaming, Push Notifications enabled",
      "commit": "e63e3812"
    },
    "system_settings_production_defaults": {
      "status": "COMPLETE",
      "completion_date": "2025-11-27",
      "records_inserted": 13,
      "categories": ["subscription (5 settings)", "platform (8 settings)"],
      "impact": "Complete production configuration in PostgreSQL system_settings table"
    }
  },

  "completed_optimizations": {
    "connection_optimizations_phase_1": {
      "status": "COMPLETE",
      "completion_date": "2025-11-20",
      "optimizations_implemented": [
        "Connection Limits Per User/IP (max 3 per IP, max 2 per user)",
        "Adaptive User Cache TTL with usage pattern recognition",
        "Event History Management with time-based and count-based limits"
      ],
      "business_impact": "Total monthly savings of $2,400 from immediate wins: prevention of server crashes and database overloads",
      "files_updated": [
        "backend/src/services/sseService.ts",
        "backend/src/sockets/streamingSocket.ts",
        "backend/src/middleware/auth.ts",
        "backend/src/config/database.ts",
        "frontend/src/pages/admin/Users.tsx",
        "frontend/src/pages/admin/Galleras.tsx",
        "frontend/src/pages/admin/Venues.tsx",
        "brain/api_endpoints_reference.json",
        "brain/typescript_interfaces_reference.json",
        "brain/backlog.json"
      ]
    },
    "connection_optimizations_phase_2": {
      "status": "COMPLETE",
      "completion_date": "2025-11-21",
      "optimizations_implemented": [
        "Connection Health Monitoring with adaptive heartbeat",
        "SSE Message Batching during high load periods",
        "Database Pool Monitoring Enhancement with predictive analytics"
      ],
      "business_impact": "Additional monthly savings of $450 from medium-risk optimizations: improved resource utilization and performance during peak loads",
      "files_updated": [
        "backend/src/services/sseService.ts",
        "backend/src/sockets/streamingSocket.ts",
        "backend/src/config/database.ts",
        "brain/backlog.json"
      ]
    }
  },

  "coordination_strategy_framework_updates": {
    "implementation_and_reporting_optimization_framework_v5_4": {
      "status": "IMPLEMENTED",
      "implementation_date": "2025-11-27",
      "version": "5.4",
      "protocol_name": "IMPLEMENTATION_AND_REPORTING_OPTIMIZATION_FRAMEWORK_2025_11_27",
      "location": "brain/multi_ai_coordination_strategy.json lines 953-1225",
      "trigger_incident": "Opción B Audit discovered 2 false claims out of 47 verified (95.7% accuracy): temporal mismatch (work date vs commit date) and feature anticipation (reported before implementation)",
      "core_principles": [
        "Work without verifiable evidence is fiction",
        "Git commits are the single source of truth for implementation timing and scope",
        "Evidence-based reporting eliminates false claims (45/47 claims with evidence were 100% accurate)"
      ],
      "mandatory_requirements": {
        "git_commit_evidence": "ALL backlog work reports MUST include git_commits field with actual commit hashes",
        "temporal_validation": "completion_date MUST match git commit timestamp, not task start date",
        "feature_claims": "Claims about 'implemented feature X' must cite commit where feature was added",
        "backlog_integrity": "Minimum required fields: task_id, status, completion_date (from git log), completed_by, git_commits, files_modified, verification_evidence"
      },
      "workflow_phases": [
        "Phase 1: Pre-implementation git baseline (git status, git log, document branch)",
        "Phase 2: Implementation with incremental commits (frequent commits with [CATEGORY] format)",
        "Phase 3: Post-implementation evidence collection (git log, git diff --stat, npx tsc)",
        "Phase 4: Backlog update with git citations (actual commit hashes, completion_date from git)"
      ],
      "bidirectional_audit_framework": {
        "direction_A_backlog_to_code": "Verify documented claims are actually implemented (read files, run git show)",
        "direction_B_code_to_backlog": "Verify implemented code is documented in backlog (git log comparison)",
        "audit_frequency": "Monthly or after major work sessions (3+ hours)"
      },
      "enforcement": {
        "zero_tolerance_date": "2025-11-27",
        "rule": "No backlog updates without git_commits field after 2025-11-27",
        "target_accuracy": "98%+ claim verification rate (current baseline: 95.7%)",
        "ai_responsibilities": {
          "executor": "Collect git evidence before reporting, cite actual commit hashes, verify dates with git log",
          "director": "Verify executor claims with independent git log checks, reject reports without git evidence"
        }
      },
      "impact": [
        "Eliminates temporal mismatches (work date vs commit date)",
        "Prevents feature anticipation (reporting before implementation)",
        "Enables quick integrity audits with git-based verification",
        "Establishes evidence-based culture: 'No git commit = didn't happen'"
      ],
      "business_value": "Maintains backlog as reliable project memory and single source of truth for work history. Enables accurate sprint planning, prevents wasted time on false claims, preserves user trust."
    }
  },
  
  "query_patterns": {
    "decision_tecnica": "Para decisiones de arquitectura, consulta `sdd_system.json` y `prd_system.json` para alinear con los requisitos.",
    "decision_producto": "Para decisiones de producto, consulta `prd_system.json`, `UI_UX.json` y `priorities_memory_index.json`.",
    "planificacion_sprint": "Para planificar un sprint, consulta `backlog.json` para tareas existentes y `priorities_memory_index.json` para la estrategia general.",
    "onboarding_ia": "Para iniciar una sesión de IA, es OBLIGATORIO leer `multi_ai_coordination_strategy.json` primero.",
    "consultar_estado_brain": "Para verificar si el estado de los archivos brain es preciso, consulta los archivos generados: `brain/generated-api-reference.json` y `brain/generated-typescript-interfaces.json` que contienen la información actual extraída directamente del código fuente."
  }
}