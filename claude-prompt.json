{
  "project": "GalloBets UI/UX Improvement Plan V4",
  "version": "4.0.0",
  "date": "2025-08-23",
  "mcp_requirements": {
    "required": ["context7", "filesystem", "git"],
    "context7_config": {
      "description": "CRITICAL: Context7 must be enabled for proper context management",
      "settings": {
        "max_tokens": 8000,
        "auto_context": true,
        "smart_selection": true
      }
    }
  },

  "phase_1_theme_migration": {
    "purpose": "Migrar de tema oscuro a tema claro con colores pastel",
    "priority": "CRITICAL",
    "estimated_time": "30 minutes",

    "requirements": {
      "visual": [
        "Fondo principal: blanco (#ffffff)",
        "Color primario: azul pastel (#6B9BD1 o similar)",
        "Color secundario: verde pastel (#7FC29B o similar)",
        "Texto principal: gris oscuro (#1F2937)",
        "Texto secundario: gris medio (#6B7280)",
        "Bordes: gris claro (#E5E7EB)",
        "Sombras: sutiles con opacidad baja"
      ],
      "technical": [
        "Mantener variables CSS para fácil mantenimiento",
        "Garantizar contraste WCAG AA mínimo 4.5:1",
        "Preservar modo responsive actual"
      ]
    },

    "tasks": [
      {
        "id": "1.1",
        "title": "Limpiar archivos CSS redundantes",
        "description": "Eliminar archivos CSS no utilizados y consolidar estilos",
        "files_to_delete": [
          "frontend/src/styles/theme.css",
          "frontend/src/App.css"
        ],
        "files_to_update": [
          {
            "path": "frontend/src/main.tsx",
            "action": "Remove import './App.css' if present"
          }
        ],
        "validation": "npm run build debe compilar sin errores"
      },

      {
        "id": "1.2",
        "title": "Actualizar variables CSS en index.css",
        "description": "Reemplazar colores oscuros con tema claro pastel",
        "file": "frontend/src/index.css",
        "changes": {
          "css_variables": {
            "/* Primary Colors */": {
              "--color-primary": "#6B9BD1",
              "--color-primary-dark": "#5A89BF",
              "--color-primary-light": "#8FB4DD",
              "--color-secondary": "#7FC29B",
              "--color-secondary-dark": "#6DAF87",
              "--color-secondary-light": "#99D1B3",
              "--color-accent": "#F0F9FF"
            },
            "/* Backgrounds */": {
              "--color-bg-main": "#FFFFFF",
              "--color-bg-card": "#F8FAFC",
              "--color-bg-header": "#FFFFFF",
              "--color-bg-hover": "#F1F5F9"
            },
            "/* Borders */": {
              "--color-border-primary": "#E5E7EB",
              "--color-border-secondary": "#D1D5DB"
            },
            "/* Text Colors */": {
              "--color-text-primary": "#1F2937",
              "--color-text-secondary": "#6B7280",
              "--color-text-light": "#9CA3AF",
              "--color-text-inverse": "#FFFFFF"
            },
            "/* Status Colors */": {
              "--color-success": "#22C55E",
              "--color-warning": "#FACC15",
              "--color-error": "#EF4444",
              "--color-info": "#3B82F6"
            },
            "/* Shadows */": {
              "--shadow-sm": "0 1px 2px 0 rgba(0, 0, 0, 0.05)",
              "--shadow-md": "0 4px 6px -1px rgba(0, 0, 0, 0.1)",
              "--shadow-lg": "0 10px 15px -3px rgba(0, 0, 0, 0.1)"
            }
          }
        },
        "test": "Visual regression test: backgrounds should be white/light"
      },

      {
        "id": "1.3",
        "title": "Actualizar clases de utilidad CSS",
        "description": "Ajustar clases theme para nuevo esquema de colores",
        "file": "frontend/src/index.css",
        "updates": [
          "Reemplazar bg-theme-main con background-color: var(--color-bg-main)",
          "Actualizar hover states para usar colores más claros",
          "Ajustar card backgrounds para usar sombras en lugar de bordes oscuros",
          "Eliminar gradientes oscuros, usar colores sólidos o gradientes sutiles"
        ]
      }
    ],

    "validation_tests": [
      {
        "test": "Color Contrast Test",
        "description": "Verificar que texto sobre fondo cumple WCAG AA",
        "expected": "Contrast ratio >= 4.5:1 for normal text, >= 3:1 for large text"
      },
      {
        "test": "Component Visibility Test",
        "description": "Todos los componentes deben ser visibles y legibles",
        "check_components": [
          "Headers",
          "Navigation",
          "Buttons",
          "Forms",
          "Cards"
        ]
      }
    ]
  },

  "phase_2_logout_consistency": {
    "purpose": "Asegurar logout consistente en todos los roles",
    "priority": "HIGH",
    "estimated_time": "15 minutes",

    "tasks": [
      {
        "id": "2.1",
        "title": "Agregar logout a OperatorHeader",
        "file": "frontend/src/components/operator/OperatorHeader.tsx",
        "code_to_add": {
          "imports": "import { LogOut } from 'lucide-react';",
          "jsx_in_header": `
            <button 
              onClick={logout} 
              className="flex items-center gap-2 px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"
              aria-label="Cerrar sesión"
            >
              <LogOut className="w-5 h-5" />
              <span className="hidden sm:inline">Logout</span>
            </button>`
        }
      },

      {
        "id": "2.2",
        "title": "Crear componente BaseHeader compartido",
        "file": "frontend/src/components/shared/BaseHeader.tsx",
        "create_new": true,
        "template": {
          "description": "Header base reutilizable con slots para personalización",
          "props": ["title", "icon", "user", "actions", "showLogout"],
          "features": [
            "Logout button consistente",
            "User info display",
            "Responsive design"
          ]
        }
      }
    ],

    "test": {
      "description": "Verificar presencia de logout en todos los layouts",
      "command": "grep -r 'logout\\|LogOut' frontend/src/components/*/Header.tsx",
      "expected": "5 matches (one per role)"
    }
  },

  "phase_3_navigation_improvements": {
    "purpose": "Mejorar navegación y breadcrumbs para mejor UX",
    "priority": "MEDIUM",
    "estimated_time": "20 minutes",

    "tasks": [
      {
        "id": "3.1",
        "title": "Hacer breadcrumbs responsive",
        "file": "frontend/src/components/shared/Breadcrumbs.tsx",
        "improvements": [
          "Colapsar breadcrumbs intermedios en móvil (mostrar solo home y current)",
          "Usar ellipsis (...) para rutas largas",
          "Agregar tooltip con ruta completa en hover"
        ],
        "code_pattern": "Use media queries or useMediaQuery hook for responsive behavior"
      },

      {
        "id": "3.2",
        "title": "Mejorar NavigationItem con feedback visual",
        "file": "frontend/src/components/shared/NavigationItem.tsx",
        "additions": [
          "Ripple effect on click",
          "Loading state mientras navega",
          "Micro-animación en badge updates"
        ]
      }
    ]
  },

  "phase_4_accessibility_enhancements": {
    "purpose": "Cumplir estándares WCAG AA completos",
    "priority": "HIGH",
    "estimated_time": "25 minutes",

    "tasks": [
      {
        "id": "4.1",
        "title": "Implementar Skip Navigation",
        "description": "Agregar link oculto para saltar al contenido principal",
        "files": ["All layout components"],
        "code": `
          <a href="#main-content" className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded">
            Saltar al contenido principal
          </a>
          <main id="main-content">...</main>`
      },

      {
        "id": "4.2",
        "title": "Agregar ARIA labels completos",
        "files_to_update": [
          "All interactive components",
          "Navigation items",
          "Form inputs",
          "Modals and dialogs"
        ],
        "guidelines": [
          "aria-label for icon-only buttons",
          "aria-describedby for form errors",
          "role='navigation' for nav components",
          "aria-live regions for dynamic content"
        ]
      },

      {
        "id": "4.3",
        "title": "Focus Management",
        "description": "Implementar focus trap en modales y gestión de focus",
        "package_to_install": "focus-trap-react",
        "implementation": "Wrap modals with FocusTrap component"
      }
    ],

    "validation": {
      "tool": "axe-devtools or lighthouse",
      "expected_score": ">= 90/100 accessibility"
    }
  },

  "phase_5_component_updates": {
    "purpose": "Actualizar componentes específicos para nuevo tema",
    "priority": "MEDIUM",
    "estimated_time": "30 minutes",

    "components_to_update": [
      {
        "path": "frontend/src/pages/admin/AdminDashboard.tsx",
        "changes": [
          "Reemplazar bg-[#1a1f37] con bg-white",
          "Reemplazar bg-[#2a325c] con bg-gray-50",
          "Actualizar text-white a text-gray-900",
          "Cambiar bordes oscuros por bordes claros"
        ]
      },
      {
        "path": "frontend/src/components/user/Navigation.tsx",
        "changes": [
          "Actualizar colores de fondo oscuros",
          "Cambiar iconos activos a azul pastel",
          "Ajustar hover states para tema claro"
        ]
      },
      {
        "path": "frontend/src/components/user/UserHeader.tsx",
        "changes": [
          "Eliminar bg-[#1a1f37]/95",
          "Usar bg-white con shadow-sm",
          "Actualizar colores de texto"
        ]
      }
    ],

    "global_replacements": [
      {
        "find": "bg-\\[#[0-9a-f]{6}\\]",
        "replace": "Check each occurrence and replace with appropriate light color",
        "files": "All .tsx files in components and pages"
      }
    ]
  },

  "phase_6_testing": {
    "purpose": "Validar todos los cambios realizados",
    "priority": "CRITICAL",
    "estimated_time": "15 minutes",

    "tests_to_run": [
      {
        "name": "Build Test",
        "command": "npm run build",
        "expected": "No errors, no warnings about missing CSS"
      },
      {
        "name": "Lint Test",
        "command": "npm run lint",
        "expected": "No linting errors"
      },
      {
        "name": "Visual Test",
        "manual": true,
        "checklist": [
          "✓ Todos los fondos son blancos/claros",
          "✓ Texto es legible (contraste adecuado)",
          "✓ Botones tienen estados hover visibles",
          "✓ Navegación muestra página activa claramente",
          "✓ Logout visible en todos los roles",
          "✓ Breadcrumbs funcionan en móvil",
          "✓ No hay elementos con colores oscuros residuales"
        ]
      },
      {
        "name": "Accessibility Test",
        "command": "Run Lighthouse audit",
        "expected": "Score >= 90"
      },
      {
        "name": "Cross-browser Test",
        "browsers": ["Chrome", "Firefox", "Safari", "Edge"],
        "check": "Visual consistency across browsers"
      }
    ]
  },

  "execution_instructions": {
    "pre_requirements": [
      "Ensure git is initialized and all changes are committed",
      "Run 'npm install' to ensure dependencies are up to date",
      "Create a new branch: git checkout -b feature/ui-light-theme-v4"
    ],

    "execution_order": [
      "Execute phases sequentially (1-6)",
      "Run tests after each phase",
      "Commit after each successful phase",
      "If any phase fails, rollback and debug before continuing"
    ],

    "rollback_plan": {
      "command": "git checkout -- .",
      "description": "Revert all changes if critical issues arise"
    },

    "completion_checklist": [
      "[ ] All CSS files cleaned up",
      "[ ] Theme variables updated to light colors",
      "[ ] Logout present in all 5 role headers",
      "[ ] Breadcrumbs responsive on mobile",
      "[ ] ARIA labels added to all interactive elements",
      "[ ] All tests passing",
      "[ ] No console errors or warnings",
      "[ ] Visual QA completed on all roles"
    ]
  },

  "context_for_ai": {
    "project_structure": {
      "frontend": "React + TypeScript + Vite",
      "styling": "Tailwind CSS + CSS Variables",
      "roles": ["user", "admin", "operator", "venue", "gallera"],
      "key_files": {
        "styles": "frontend/src/index.css",
        "layouts": "frontend/src/components/layouts/*",
        "headers": "frontend/src/components/*/Header.tsx"
      }
    },

    "coding_conventions": {
      "components": "Functional components with TypeScript",
      "styling": "Tailwind utilities first, custom CSS only when needed",
      "imports": "Absolute imports from 'src/'",
      "naming": "PascalCase for components, camelCase for functions"
    },

    "constraints": [
      "Maintain WebSocket singleton pattern",
      "Preserve layout persistence between routes",
      "Keep header components mounted during navigation",
      "Ensure all financial operations remain atomic"
    ],

    "quality_standards": {
      "performance": "Lighthouse score >= 90",
      "accessibility": "WCAG AA compliance",
      "browser_support": "Last 2 versions of major browsers",
      "responsive": "Mobile-first, works from 320px width"
    }
  }
}
