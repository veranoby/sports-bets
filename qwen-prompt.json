{
  "metadata": {
    "task_name": "Manual ESLint Warning Resolution",
    "complexity": "HIGH",
    "execution_mode": "standard",
    "assigned_role": "executor",
    "model_preference": "qwen3-coder-plus-2025-09-23",
    "git_branch": "feature/fix-lint-warnings"
  },
  "critical_protocols": {
    "comment": "Executor AI must adhere to these protocols from brain/multi_ai_coordination_strategy.json",
    "protocols_to_follow": [
      "ðŸ”´_AUDIT_AND_ANALYSIS_METHODOLOGY_PROTOCOL",
      "ðŸ”´_UI_VERIFICATION_PROTOCOL",
      "ðŸ”´_SOURCE_VERIFICATION_BEFORE_USAGE_PROTOCOL",
      "simulate_y_confirmar_protocol",
      "ðŸ”´_IMPLEMENTATION_AND_REPORTING_OPTIMIZATION_FRAMEWORK_2025_11_27"
    ]
  },
  "reference_files_to_read_first": [
    "/home/veranoby/sports-bets/frontend/.eslintrc.js",
    "/home/veranoby/sports-bets/brain/typescript_interfaces_reference.json",
    "/home/veranoby/sports-bets/brain/multi_ai_coordination_strategy.json"
  ],
  "analysis_summary": {
    "initial_request": "Create a strategy to fix the 389 ESLint warnings. A first automated pass (`eslint --fix`) was run, but 389 warnings remain because they require manual intervention.",
    "findings": "The remaining warnings fall into four main categories, which must be addressed in order of priority to ensure application stability and code quality.",
    "prioritized_categories": [
      {
        "category": "react-hooks/exhaustive-deps",
        "priority": 1,
        "count": 8,
        "risk": "CRITICAL - Can cause data corruption and UI bugs",
        "complexity": "Medium",
        "rationale": "Despite low count, these cause actual bugs. Fix first."
      },
      {
        "category": "@typescript-eslint/no-unused-vars",
        "priority": 2,
        "count": 230,
        "risk": "Low - Code clutter only",
        "complexity": "Low",
        "rationale": "Quick wins (59% of warnings). Build momentum."
      },
      {
        "category": "@typescript-eslint/no-explicit-any",
        "priority": 3,
        "count": 148,
        "risk": "Medium - Technical debt",
        "complexity": "High",
        "rationale": "Time-consuming. Requires reading API responses, defining types."
      },
      {
        "category": "react-refresh/only-export-components",
        "priority": 4,
        "count": 3,
        "risk": "Low - DX only",
        "complexity": "Medium",
        "rationale": "Minimal impact. Lowest priority."
      }
    ]
  },
  "step_by_step_implementation_plan": {
    "comment": "This plan is designed to be executed in phases. Commit changes after each phase is successfully completed and validated.",
    "phase_1_fix_exhaustive_deps": {
      "objective": "Ensure all React hooks (`useEffect`, `useCallback`, etc.) have correct dependencies to prevent stale state and related bugs.",
      "action": "Run `npm run lint` inside the `frontend` directory to get a list of all files with `exhaustive-deps` warnings. For each file, perform the following:",
      "process": [
        "0. SOURCE_VERIFICATION_PROTOCOL: Read complete component file BEFORE fixing",
        "0a. Identify the dependency ESLint suggests (variable, function, prop?)",
        "0b. Read the DEFINITION of that dependency (is it defined inside component?)",
        "0c. If function: Is it defined inline? â†’ needs useCallback wrapper",
        "0d. If object/array: Is it created on each render? â†’ needs useMemo wrapper",
        "1. Identify the hook with the missing dependency as reported by ESLint.",
        "2. Add the suggested variable or function to the dependency array.",
        "3. **CRITICAL:** If adding the dependency causes a potential infinite loop (e.g., a function that is redefined on every render), you MUST wrap that function in a `useCallback` hook to memoize it. If it's an object or array, use `useMemo`.",
        "4. Repeat for all `exhaustive-deps` warnings in the project."
      ],
      "validation": "After fixing all `exhaustive-deps` warnings, run `npm run lint` again. The count of these specific warnings should be zero. Then, run `npx tsc --noEmit` and `npm run dev` to ensure the application still functions correctly."
    },
    "phase_2_eliminate_explicit_any": {
      "objective": "Improve type safety and reduce technical debt by replacing the `any` type with specific, accurate interfaces or types.",
      "action": "Run `npm run lint` to get a list of all files with `no-explicit-any` warnings. For each file, perform the following:",
      "process": [
        "1. Identify each variable, parameter, or return value typed as `any`.",
        "2. **Investigate:** Determine the correct data structure. Check the API response that provides the data or how the object is used in the component.",
        "3. **Consult:** Read `@brain/typescript_interfaces_reference.json` to see if a suitable type already exists.",
        "3.5. VERIFY with Read tool: Check actual API response or usage context",
        "3.6. If API response: Read backend endpoint file to see return type",
        "3.7. If event handler: Read component to see what data it receives",
        "4. **Define or Use:** If a type exists, import and use it. If not, define a new, specific `interface` or `type` in the appropriate file (e.g., a shared types file or locally in the component if it's not reused).",
        "5. Replace `any` with the correct type."
      ],
      "validation": "Run `npx tsc --noEmit`. The build must pass. The number of `no-explicit-any` warnings should decrease."
    },
    "phase_3_remove_unused_vars_manually": {
      "objective": "Clean up the codebase by removing any remaining unused variables, imports, or functions that the `--fix` command could not handle.",
      "action": "Run `npm run lint` to get a list of all files with `no-unused-vars` warnings. For each file, perform the following:",
      "process": [
        "1. Locate the highlighted unused variable, import, or function.",
        "2. Safely delete the entire line. Be careful not to delete code that is actually used."
      ],
      "validation": "Run `npx tsc --noEmit` and `npm run dev` to ensure that the deletions did not break any functionality."
    },
    "phase_4_refactor_for_react_refresh": {
      "objective": "Improve the developer experience by ensuring files with components only export components.",
      "action": "Run `npm run lint` to get a list of files with `only-export-components` warnings. For each file, perform the following:",
      "process": [
        "1. Identify the non-component exports in the file (e.g., custom hooks, constants, helper functions).",
        "2. Create or find an appropriate utility file (e.g., `frontend/src/hooks/useMyHook.ts`, `frontend/src/utils/helpers.ts`).",
        "3. Move the non-component exports to the utility file.",
        "4. Update all import statements in the project that were pointing to the old component file to now point to the new utility file."
      ],
      "validation": "Run `npm run build` to ensure all imports were updated correctly and the application builds successfully."
    }
  },
  "success_criteria": [
    "âœ… ESLint warnings reduced from 389 to <50 (target: 0)",
    "âœ… npx tsc --noEmit returns 0 errors after EACH phase",
    "âœ… npm run dev starts without errors after EACH phase",
    "âœ… npm run build succeeds after final phase",
    "âœ… git commits include [PHASE_1], [PHASE_2], etc. tags",
    "âœ… backlog.json updated with git_commits array and verification_evidence",
    "âœ… All changes verified with git diff before commit"
  ],
  "error_handling_plan": {
    "typescript_errors": "If `npx tsc --noEmit` fails at any point, stop and fix the type errors before proceeding. Do not commit code that does not compile.",
    "runtime_errors": "If the application fails to run after a change, revert the change for that specific file (`git restore <file>`) and analyze the root cause before attempting another fix."
  }
}
