{
  "task": "URGENT: Fix Backend TypeScript Compilation Errors for Streaming MVP",
  "priority": "CRITICAL - MVP launch in 2 days",
  "estimated_time": "20-30 minutes",

  "AGENT_ACTIVATION": [
    "backend-engineer",
    "quality-engineer"
  ],

  "CONTEXT": {
    "situation": "Backend crashes preventing RTMP streaming server startup. 4 specific TypeScript errors identified.",
    "goal": "Fix TypeScript errors so backend starts and RTMP can be integrated",
    "constraint": "NO destructive edits. ONLY fix compilation errors."
  },

  "SPECIFIC_ERRORS_TO_FIX": [
    {
      "file": "backend/src/services/databaseHooks.ts",
      "errors": [
        "Line 53: fight._previousDataValues -> fight.previous('status')",
        "Line 98: field parameter needs 'as keyof Fight' cast",
        "Line 176: bet._previousDataValues -> bet.previous('proposalStatus')",
        "Line 318: user._previousDataValues -> user.previous('profileInfo')",
        "Line 356: user._previousDataValues -> user.previous('role')",
        "Lines 388,392: Cast model as 'any' for beforeFind/afterFind hooks",
        "Lines 433-438: removeHook calls need 2 parameters (add hook names)"
      ]
    },
    {
      "file": "backend/src/services/sseService.ts",
      "errors": [
        "Line 558: Change 'export { AdminChannel, SSEConnection, SSEEvent }' to 'export type { SSEConnection, SSEEvent }'",
        "Line 62-68: Add amount?: number; streamId?: string; to metadata interface"
      ]
    },
    {
      "file": "backend/src/services/notificationService.ts",
      "errors": [
        "Add import: SSEEventType from './sseService'",
        "Line 28: Use SSEEventType.NOTIFICATION instead of 'NOTIFICATION'",
        "Line 37: Use SSEEventType.USER_NOTIFICATION instead of 'USER_NOTIFICATION'"
      ]
    }
  ],

  "VALIDATION_COMMANDS": [
    "cd backend && npx tsc --noEmit",
    "Should show 0 errors when complete"
  ],

  "SUCCESS_CRITERIA": [
    "Zero TypeScript compilation errors in backend",
    "No breaking changes to existing functionality",
    "Backend can start without crashes"
  ],

  "RESTRICTIONS": [
    "DO NOT modify business logic",
    "DO NOT change API endpoints",
    "DO NOT alter database models",
    "ONLY fix TypeScript compilation issues"
  ],

  "NEXT_STEP": "Claude will validate fixes and integrate RTMP server"
}